@* Delete Confirmation Modal - Simple Dark Blue Theme *@
<div class="modal-overlay" id="deleteConfirmModal" style="display: none;">
    <div class="delete-modal-dialog">
        <div class="delete-modal-content">
            <div class="delete-modal-body">
                <div class="delete-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        <line x1="10" y1="11" x2="10" y2="17"></line>
                        <line x1="14" y1="11" x2="14" y2="17"></line>
                    </svg>
                </div>
                <h3 class="delete-title">Delete Shareholder?</h3>
                <p class="delete-message">
                    <strong id="deleteShareholderName"></strong>
                </p>
                <p class="delete-warning">
                    This will permanently delete all data including passports and dependents.
                </p>
            </div>
            <div class="delete-modal-footer">
                <button type="button" class="btn-cancel" onclick="closeDeleteModal()">Cancel</button>
                <button type="button" class="btn-delete" onclick="confirmDelete()">Delete</button>
            </div>
        </div>
    </div>
</div>

<style>
    /* Simple Delete Modal - Dark Blue Theme */
    #deleteConfirmModal.modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(30, 58, 138, 0.6);
        backdrop-filter: blur(2px);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        animation: fadeIn 0.15s ease;
    }

    @@keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .delete-modal-dialog {
        max-width: 400px;
        width: 100%;
        animation: slideUp 0.2s ease;
    }

    @@keyframes slideUp {
        from {
            transform: translateY(20px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    .delete-modal-content {
        background: white;
        border-radius: 8px;
        box-shadow: 0 8px 32px rgba(30, 58, 138, 0.3);
        overflow: hidden;
    }

    /* Body */
    .delete-modal-body {
        padding: 32px 24px 24px 24px;
        text-align: center;
    }

    .delete-icon {
        width: 56px;
        height: 56px;
        margin: 0 auto 16px auto;
        background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .delete-icon svg {
        width: 28px;
        height: 28px;
        color: white;
        stroke-width: 2.5;
    }

    .delete-title {
        font-size: 18px;
        font-weight: 600;
        color: #1e3a8a;
        margin: 0 0 12px 0;
    }

    .delete-message {
        font-size: 15px;
        color: #374151;
        margin: 0 0 12px 0;
        word-break: break-word;
    }

    .delete-message strong {
        color: #1e3a8a;
        font-weight: 600;
    }

    .delete-warning {
        font-size: 13px;
        color: #6b7280;
        margin: 0;
        line-height: 1.5;
    }

    /* Footer */
    .delete-modal-footer {
        padding: 16px 24px;
        background: #f9fafb;
        display: flex;
        gap: 12px;
    }

    .btn-cancel,
    .btn-delete {
        flex: 1;
        padding: 10px 20px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
    }

    .btn-cancel {
        background: white;
        color: #374151;
        border: 1.5px solid #d1d5db;
    }

    .btn-cancel:hover {
        background: #f9fafb;
        border-color: #9ca3af;
    }

    .btn-delete {
        background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%) !important;
        color: white !important;
        opacity: 1 !important;
    }

    .btn-delete:hover {
        background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%) !important;
        box-shadow: 0 2px 8px rgba(30, 58, 138, 0.3);
    }

    .btn-delete:disabled {
        opacity: 1 !important;
        cursor: not-allowed;
        background: linear-gradient(135deg, #1e3a8a 0%, #2563eb 100%) !important;
        color: white !important;
    }

    /* Responsive */
    @@media (max-width: 640px) {
        .delete-modal-dialog {
            max-width: 100%;
        }

        .delete-modal-body {
            padding: 28px 20px 20px 20px;
        }

        .delete-modal-footer {
            flex-direction: column-reverse;
            gap: 8px;
        }

        .btn-cancel,
        .btn-delete {
            width: 100%;
        }
    }
</style>

<script>
    let deleteShareholderFolioId = null;

    function showDeleteConfirmation(folioId, shareholderName) {
        deleteShareholderFolioId = folioId;
        const displayName = folioId + (shareholderName ? ' - ' + shareholderName : '');
        document.getElementById('deleteShareholderName').textContent = displayName;
        document.getElementById('deleteConfirmModal').style.display = 'flex';
        document.body.style.overflow = 'hidden';
    }

    function closeDeleteModal() {
        document.getElementById('deleteConfirmModal').style.display = 'none';
        document.body.style.overflow = 'auto';
        deleteShareholderFolioId = null;
    }

    function confirmDelete() {
        if (!deleteShareholderFolioId) {
            return;
        }

        const folioId = deleteShareholderFolioId;
        const deleteBtn = document.querySelector('.btn-delete');
        const originalText = deleteBtn.textContent;
        
        deleteBtn.textContent = 'Deleting...';
        deleteBtn.disabled = true;

        fetch('@Url.Action("DeleteShareholder", "ShareholderListPage")', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ folioId: folioId })
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                closeDeleteModal();
                window.location.reload();
            } else {
                alert('Failed to delete shareholder: ' + data.message);
                deleteBtn.textContent = originalText;
                deleteBtn.disabled = false;
            }
        })
        .catch(error => {
            alert('Error: ' + error.message);
            deleteBtn.textContent = originalText;
            deleteBtn.disabled = false;
        });
    }

    // Close on Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && document.getElementById('deleteConfirmModal').style.display === 'flex') {
            closeDeleteModal();
        }
    });

    // Close on overlay click
    document.addEventListener('click', function(event) {
        const modal = document.getElementById('deleteConfirmModal');
        if (event.target === modal) {
            closeDeleteModal();
        }
    });
</script>


